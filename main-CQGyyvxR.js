import{j as e,r as a,C as S,u as j,T as c,B as v,S as D,P as T,c as W}from"./three-D8slNa4G.js";import"./vendor-9sitkZcQ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();const k=`
struct VertexInput {
  @location(0) position: vec3<f32>,
  @location(1) normal: vec3<f32>,
  @location(2) uv: vec2<f32>,
}

struct VertexOutput {
  @builtin(position) clip_position: vec4<f32>,
  @location(0) world_position: vec3<f32>,
  @location(1) normal: vec3<f32>,
  @location(2) uv: vec2<f32>,
}

struct Uniforms {
  view_proj: mat4x4<f32>,
  model: mat4x4<f32>,
  time: f32,
  light_position: vec3<f32>,
}

@group(0) @binding(0)
var<uniform> uniforms: Uniforms;

@vertex
fn vs_main(input: VertexInput) -> VertexOutput {
  var out: VertexOutput;
  
  let world_position = uniforms.model * vec4<f32>(input.position, 1.0);
  out.world_position = world_position.xyz;
  out.clip_position = uniforms.view_proj * world_position;
  out.normal = normalize((uniforms.model * vec4<f32>(input.normal, 0.0)).xyz);
  out.uv = input.uv;
  
  return out;
}
`,R=`
struct FragmentInput {
  @location(0) world_position: vec3<f32>,
  @location(1) normal: vec3<f32>,
  @location(2) uv: vec2<f32>,
}

struct Uniforms {
  view_proj: mat4x4<f32>,
  model: mat4x4<f32>,
  time: f32,
  light_position: vec3<f32>,
}

@group(0) @binding(0)
var<uniform> uniforms: Uniforms;

@group(0) @binding(1)
var texture_sampler: sampler;

@group(0) @binding(2)
var metallic_texture: texture_2d<f32>;

@fragment
fn fs_main(input: FragmentInput) -> @location(0) vec4<f32> {
  let uv = input.uv;
  let world_pos = input.world_position;
  let normal = normalize(input.normal);

  // Sample metallic texture for base color
  var base_color = textureSample(metallic_texture, texture_sampler, uv).rgb;

  // Lighting calculation
  let light_dir = normalize(uniforms.light_position - world_pos);
  let view_dir = normalize(-world_pos); // Assuming camera at origin
  let half_dir = normalize(light_dir + view_dir);

  // Diffuse lighting
  let diffuse = max(0.0, dot(normal, light_dir));

  // Specular lighting (stronger for metallic)
  let specular = pow(max(0.0, dot(normal, half_dir)), 64.0) * 0.5;

  // Ambient lighting
  let ambient = 0.4;

  // Final color composition
  let final_color = base_color * (ambient + diffuse * 0.7) + vec3<f32>(specular);

  return vec4<f32>(final_color, 1.0);
}
`;class A{device;pipeline=null;uniformBuffer=null;metallicTexture=null;bindGroup=null;constructor(t){this.device=t}async initialize(){const t=this.device.createShaderModule({code:k}),o=this.device.createShaderModule({code:R});this.uniformBuffer=this.device.createBuffer({size:160,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});const r=await fetch("./src/assets/textures/metallic.png"),n=await createImageBitmap(await r.blob());this.metallicTexture=this.device.createTexture({size:[n.width,n.height,1],format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT}),this.device.queue.copyExternalImageToTexture({source:n},{texture:this.metallicTexture},[n.width,n.height]);const s=this.device.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,buffer:{type:"uniform"}},{binding:1,visibility:GPUShaderStage.FRAGMENT,sampler:{}},{binding:2,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"unfilterable-float"}}]}),l=this.device.createSampler({magFilter:"linear",minFilter:"linear",mipmapFilter:"linear",addressModeU:"repeat",addressModeV:"repeat"});this.bindGroup=this.device.createBindGroup({layout:s,entries:[{binding:0,resource:{buffer:this.uniformBuffer}},{binding:1,resource:l},{binding:2,resource:this.metallicTexture.createView()}]}),this.pipeline=this.device.createRenderPipeline({layout:this.device.createPipelineLayout({bindGroupLayouts:[s]}),vertex:{module:t,entryPoint:"vs_main",buffers:[{arrayStride:32,attributes:[{format:"float32x3",offset:0,shaderLocation:0},{format:"float32x3",offset:12,shaderLocation:1},{format:"float32x2",offset:24,shaderLocation:2}]}]},fragment:{module:o,entryPoint:"fs_main",targets:[{format:"bgra8unorm"}]},primitive:{topology:"triangle-list",cullMode:"back"}})}updateUniforms(t,o,r,n){if(!this.uniformBuffer)return;const s=new Float32Array(40);s.set(t,0),s.set(o,16),s[32]=r,s.set(n,33),this.device.queue.writeBuffer(this.uniformBuffer,0,s.buffer)}render(t,o,r,n){!this.pipeline||!this.bindGroup||(t.setPipeline(this.pipeline),t.setBindGroup(0,this.bindGroup),t.setVertexBuffer(0,o),t.setIndexBuffer(r,"uint16"),t.drawIndexed(n))}}class _{device=null;context=null;canvas;fallbackToWebGL=!1;webglContext=null;sandstoneMaterial=null;quadVertexBuffer=null;quadIndexBuffer=null;depthTexture=null;constructor(t){this.canvas=t}async initialize(){try{if("gpu"in navigator&&navigator.gpu){const t=navigator.gpu,o=await t.requestAdapter();if(o&&(this.device=await o.requestDevice(),this.context=this.canvas.getContext("webgpu"),this.context&&this.device))return this.context.configure({device:this.device,format:t.getPreferredCanvasFormat(),alphaMode:"premultiplied"}),this.sandstoneMaterial=new A(this.device),await this.sandstoneMaterial.initialize(),this.createFullScreenQuad(),!0}}catch{}return this.initializeWebGL()}initializeWebGL(){try{if(this.webglContext=this.canvas.getContext("webgl2")||this.canvas.getContext("webgl"),this.webglContext)return this.fallbackToWebGL=!0,this.webglContext.enable(this.webglContext.DEPTH_TEST),this.webglContext.enable(this.webglContext.CULL_FACE),!0}catch{}return!1}render(t,o,r){this.fallbackToWebGL?this.renderWebGL(t,o,r):this.renderWebGPU(t,o,r)}renderWebGPU(t,o,r){if(!this.device||!this.context)return;const n=this.device.createCommandEncoder(),l={colorAttachments:[{view:this.context.getCurrentTexture().createView(),clearValue:{r:0,g:0,b:0,a:0},loadOp:"clear",storeOp:"store"}]},d=n.beginRenderPass(l);if(this.sandstoneMaterial&&this.quadVertexBuffer&&this.quadIndexBuffer){const m=performance.now()/1e3,b=new Float32Array([2,5,10]),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),p=new Float32Array(16);p.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.sandstoneMaterial.updateUniforms(p,u,m,b),this.sandstoneMaterial.render(d,this.quadVertexBuffer,this.quadIndexBuffer,6)}for(const m of t)this.renderObjectWebGPU(d,m,o,r);d.end(),this.device.queue.submit([n.finish()])}renderObjectWebGPU(t,o,r,n){o.mesh}createFullScreenQuad(){if(!this.device)return;const t=new Float32Array([-1,-1,.999,0,0,1,0,1,1,-1,.999,0,0,1,1,1,1,1,.999,0,0,1,1,0,-1,1,.999,0,0,1,0,0]),o=new Uint16Array([0,1,2,0,2,3]);this.quadVertexBuffer=this.device.createBuffer({size:t.byteLength,usage:GPUBufferUsage.VERTEX,mappedAtCreation:!0}),new Float32Array(this.quadVertexBuffer.getMappedRange()).set(t),this.quadVertexBuffer.unmap(),this.quadIndexBuffer=this.device.createBuffer({size:o.byteLength,usage:GPUBufferUsage.INDEX,mappedAtCreation:!0}),new Uint16Array(this.quadIndexBuffer.getMappedRange()).set(o),this.quadIndexBuffer.unmap()}renderWebGL(t,o,r){if(!this.webglContext)return;const n=this.webglContext;n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.viewport(0,0,this.canvas.width,this.canvas.height);for(const s of t)this.renderObjectWebGL(s,o,r)}renderObjectWebGL(t,o,r){this.webglContext}resize(t,o){this.canvas.width=t,this.canvas.height=o,this.isWebGPU()&&this.device&&this.context&&(this.context.configure({device:this.device,format:navigator.gpu.getPreferredCanvasFormat(),alphaMode:"premultiplied"}),this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture({size:[t,o],format:"depth24plus",usage:GPUTextureUsage.RENDER_ATTACHMENT})),this.fallbackToWebGL&&this.webglContext&&this.webglContext.viewport(0,0,t,o)}dispose(){this.device&&this.device.destroy(),this.device=null,this.context=null,this.webglContext=null}isWebGPU(){return!this.fallbackToWebGL&&this.device!==null}isWebGL(){return this.fallbackToWebGL&&this.webglContext!==null}}function B(i,t,o,r){const n=1/Math.tan(i/2),s=1/(o-r);return new Float32Array([n/t,0,0,0,0,n,0,0,0,0,(r+o)*s,-1,0,0,2*r*o*s,0])}function P(i,t,o){const r=M(E(i,t)),n=M(I(o,r)),s=I(r,n);return new Float32Array([n[0],s[0],r[0],0,n[1],s[1],r[1],0,n[2],s[2],r[2],0,-y(n,i),-y(s,i),-y(r,i),1])}function E(i,t){return[i[0]-t[0],i[1]-t[1],i[2]-t[2]]}function I(i,t){return[i[1]*t[2]-i[2]*t[1],i[2]*t[0]-i[0]*t[2],i[0]*t[1]-i[1]*t[0]]}function y(i,t){return i[0]*t[0]+i[1]*t[1]+i[2]*t[2]}function M(i){const t=Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);return t>0?[i[0]/t,i[1]/t,i[2]/t]:[0,0,0]}function U({onNavigate:i}){return e.jsxs("div",{className:"kasm-landing-container",children:[e.jsx("h1",{children:"Kasm SDK"}),e.jsx("p",{className:"sunken-paragraph",children:"The Kasm SDK main intention is interoperability between Web Browsers and DAWs, in particular to make head way for Augment Reality and Virtual Reality instruments more achievable by utilising cross platform technologies such as WebAssembly, WebXR, WebGL/WebGPU, WebMIDI and OSC (Open Sound Control)"}),e.jsxs("div",{className:"kasm-demo-buttons",children:[e.jsx("button",{className:"kasm-demo-btn",onClick:()=>i("emanator"),children:"ðŸŽ¹ Emanator"}),e.jsx("button",{className:"kasm-demo-btn",onClick:()=>i("bangaz"),children:"ðŸŽ¹ Bangaz"}),e.jsx("button",{className:"kasm-demo-btn",onClick:()=>i("arpy"),children:"ðŸŽ¹ Arpy"})]}),e.jsx("div",{className:"kasm-tech-note"}),e.jsx("div",{style:{marginTop:"2rem",width:"100%",display:"flex",justifyContent:"center"},children:e.jsx("iframe",{src:"https://kasmsdk.github.io/latest/emanator.html",title:"Kasm Demo",width:"90%",height:"1024",style:{border:"2px solid #ccc",borderRadius:"12px",boxShadow:"0 2px 16px rgba(0,0,0,0.12)"},allowFullScreen:!0})})]})}function G(){const i=a.useRef(null),[t,o]=a.useState({protocol:"TechWebMIDI",latency:"45ms",throughput:"125 Mbps",objects:1247,subscribers:8,publishers:3,quality:"Ultra Low Latency"});return j(()=>{o(r=>({...r,latency:`${(40+Math.sin(Date.now()*.001)*10).toFixed(0)}ms`,throughput:`${(120+Math.sin(Date.now()*.0015)*20).toFixed(0)} Mbps`,objects:r.objects+Math.floor(Math.random()*3),subscribers:8+Math.floor(Math.sin(Date.now()*.002)*2),publishers:3+Math.floor(Math.cos(Date.now()*.0025)*1)}))}),e.jsxs("group",{position:[0,0,-2],children:[e.jsx(c,{ref:i,position:[0,.8,0],fontSize:.25,color:"#00ff00",anchorX:"center",anchorY:"middle",children:"WebMIDI"}),e.jsxs(c,{position:[0,.4,0],fontSize:.12,color:"#ffff00",anchorX:"center",anchorY:"middle",children:["Protocol: ",t.protocol," | Quality: ",t.quality]}),e.jsxs(c,{position:[0,.2,0],fontSize:.1,color:"#ff6600",anchorX:"center",anchorY:"middle",children:["Latency: ",t.latency," | Throughput: ",t.throughput]}),e.jsxs(c,{position:[0,0,0],fontSize:.1,color:"#00ffff",anchorX:"center",anchorY:"middle",children:["Objects: ",t.objects," | Subscribers: ",t.subscribers]}),e.jsxs(c,{position:[0,-.2,0],fontSize:.1,color:"#ff00ff",anchorX:"center",anchorY:"middle",children:["Publishers: ",t.publishers]}),e.jsx(c,{position:[0,-.5,0],fontSize:.08,color:"#888888",anchorX:"center",anchorY:"middle",children:"Ultra-low latency media streaming over QUIC"})]})}function L(){const i=a.useRef(null),t=a.useRef(null),o=a.useRef([]),r=a.useRef(null);return j(()=>{const n=Date.now()*.001;if(i.current&&(i.current.rotation.y=n*.4,i.current.scale.setScalar(1+Math.sin(n*2)*.1)),t.current&&(t.current.rotation.x=n*.3,t.current.rotation.z=n*.2),o.current.forEach((s,l)=>{s&&(s.rotation.y=n*(.5+l*.1),s.position.y=Math.sin(n*(1+l*.3))*.1)}),r.current){r.current.position.x=Math.sin(n*3)*.4;const s=r.current.material;s&&"opacity"in s&&(s.opacity=.7+Math.sin(n*5)*.2)}}),e.jsxs("group",{position:[2,0,-2],children:[e.jsx(v,{ref:i,args:[.3,.3,.3],position:[-.8,.4,0],children:e.jsx("meshBasicMaterial",{color:"#00ff00"})}),e.jsx(D,{ref:t,args:[.2,16,16],position:[0,.2,0],children:e.jsx("meshBasicMaterial",{color:"#ffff00"})}),e.jsx(T,{ref:r,args:[.6,.03],position:[0,.4,0],children:e.jsx("meshBasicMaterial",{color:"#00ffff",transparent:!0})}),[0,1,2].map(n=>e.jsx(v,{ref:s=>{s&&(o.current[n]=s)},args:[.2,.2,.2],position:[.6+n*.3,-.2-n*.2,0],children:e.jsx("meshBasicMaterial",{color:"#ff6600"})},n)),e.jsx(c,{position:[-.8,.1,0],fontSize:.06,color:"#00ff00",anchorX:"center",anchorY:"middle",children:"Publisher"}),e.jsx(c,{position:[0,-.1,0],fontSize:.06,color:"#ffff00",anchorX:"center",anchorY:"middle",children:"WebMIDI Relay"}),e.jsx(c,{position:[.8,-.6,0],fontSize:.06,color:"#ff6600",anchorX:"center",anchorY:"middle",children:"Subscribers"}),e.jsx(c,{position:[0,-.9,0],fontSize:.08,color:"#ffffff",anchorX:"center",anchorY:"middle",children:"WebMIDI Network"}),e.jsx(c,{position:[0,-1.1,0],fontSize:.06,color:"#888888",anchorX:"center",anchorY:"middle",children:"QUIC Transport"})]})}function N(){const[i]=a.useState(["ðŸš€ Ultra Low Latency","ðŸ“¦ Object-based Delivery","ðŸ”„ Adaptive Bitrate","ðŸŒ CDN Integration","ðŸ“± Multi-device Sync","ðŸ”’ Built-in Security"]),[t]=a.useState(["Live Streaming","Interactive Media","Gaming Applications","Real-time Collaboration","IoT Data Streams"]);return e.jsxs("group",{position:[-2,0,-2],children:[e.jsx(c,{position:[0,1,0],fontSize:.12,color:"#ffffff",anchorX:"center",anchorY:"middle",children:"WebMIDI Features"}),i.map((o,r)=>e.jsx(c,{position:[0,.6-r*.15,0],fontSize:.07,color:"#00ff88",anchorX:"center",anchorY:"middle",children:o},r)),e.jsx(c,{position:[0,-.5,0],fontSize:.1,color:"#ffff00",anchorX:"center",anchorY:"middle",children:"Use Cases"}),t.map((o,r)=>e.jsxs(c,{position:[0,-.7-r*.1,0],fontSize:.06,color:"#ff6600",anchorX:"center",anchorY:"middle",children:["â€¢ ",o]},r))]})}function F(){return e.jsxs(e.Fragment,{children:[e.jsx("ambientLight",{intensity:.5}),e.jsx("pointLight",{position:[10,10,10]}),e.jsx(G,{}),e.jsx(L,{}),e.jsx(N,{})]})}function X(){const[i,t]=a.useState({webmidi:!1});return a.useEffect(()=>{(()=>{t({webmidi:!1})})()},[]),e.jsxs("div",{className:"webmidi-container",style:{width:"100%",height:"100vh",position:"relative"},children:[e.jsxs("div",{className:"webmidi-header",style:{position:"absolute",top:"20px",left:"20px",zIndex:10,background:"rgba(0, 0, 0, 0.7)",padding:"1rem",borderRadius:"10px",color:"white"},children:[e.jsx("h2",{children:"ðŸ“¡ WebMIDI"}),e.jsx("p",{children:"Ultra-low latency media streaming protocol"}),e.jsx("p",{style:{fontSize:"0.9em",marginTop:"10px",color:"#aaa"},children:"Object-based media delivery with Rust WebAssembly optimization"}),e.jsx("div",{style:{marginTop:"10px",fontSize:"0.8em"},children:e.jsxs("div",{style:{color:i.webmidi?"#00ff00":"#ffaa00"},children:[i.webmidi?"âœ…":"ðŸš§"," WebMIDI (Experimental)"]})})]}),e.jsx(S,{camera:{position:[0,0,5],fov:75},style:{background:"linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%)"},children:e.jsx(F,{})})]})}function K(){const[i,t]=a.useState("webmidi");a.useEffect(()=>{const n=new URLSearchParams(window.location.search).get("module");n&&["webmidi"].includes(n)&&t(n)},[]);const o=[{id:"webmidi",name:"WebMIDI",icon:"ðŸ“¡",description:"TechWebMIDI"},{id:"webgpu",name:"WebGPU",icon:"ðŸ“¡",description:"WebGPU"}];return e.jsxs("div",{className:"tech-container",style:{width:"100%",height:"100vh",position:"relative"},children:[e.jsxs("div",{className:"tech-selector",style:{position:"absolute",top:"20px",right:"20px",zIndex:20,background:"rgba(0, 0, 0, 0.8)",borderRadius:"15px",padding:"1rem",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx("h3",{style:{color:"white",marginBottom:"1rem",fontSize:"1.1rem",textAlign:"center"},children:"ðŸ”§ Tech Demos"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:o.map(r=>e.jsx("button",{onClick:()=>t(r.id),style:{background:i===r.id?"rgba(0, 255, 136, 0.2)":"rgba(255, 255, 255, 0.1)",border:i===r.id?"1px solid rgba(0, 255, 136, 0.5)":"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"10px",padding:"0.75rem",color:"white",cursor:"pointer",transition:"all 0.3s ease",fontSize:"0.9rem",minWidth:"180px",textAlign:"left"},onMouseEnter:n=>{i!==r.id&&(n.currentTarget.style.background="rgba(255, 255, 255, 0.2)")},onMouseLeave:n=>{i!==r.id&&(n.currentTarget.style.background="rgba(255, 255, 255, 0.1)")},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"1.2rem",color:"var(--sandstone-base)"},children:r.icon}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:r.name}),e.jsx("div",{style:{fontSize:"0.8rem",opacity:.8},children:r.description})]})]})},r.id))}),e.jsx("div",{style:{marginTop:"1rem",padding:"0.5rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",fontSize:"0.8rem",color:"#aaa",textAlign:"center"},children:"Giving a home to various tech demos and experiments that might be useful to others."})]}),e.jsx("div",{className:"tech-module-display",style:{width:"100%",height:"100%"},children:i==="webmidi"&&e.jsx(X,{})}),e.jsxs("div",{className:"tech-info",style:{position:"absolute",bottom:"20px",left:"20px",zIndex:10,background:"rgba(0, 0, 0, 0.7)",padding:"1rem",borderRadius:"10px",color:"white",maxWidth:"300px"},children:[e.jsxs("h4",{style:{marginBottom:"0.5rem",color:"var(--sandstone-base)"},children:[o.find(r=>r.id===i)?.icon," ",o.find(r=>r.id===i)?.name]}),e.jsxs("p",{style:{fontSize:"0.9rem",lineHeight:"1.4",margin:0},children:[i==="webmidi"&&"How TechWebMIDI works, or at least is supposed to.",i==="webgpu"&&"How WebGPU can be used to speed instrument rendering and visualizations up."]})]})]})}function O(){const i=a.useRef(null),[t,o]=a.useState(0),r=[{title:"Kasm XR Experience",subtitle:"Advanced WebXR Platform",description:"Control virtual musical instruments that aren't quite all there"},{title:"Rust WebAssembly Core",subtitle:"High-Performance Computing",description:"Shared WASM foundation across all modules"},{title:"WebXR Innovation",subtitle:"Immersive Experiences",description:"AR/VR capabilities for modern web browsers"}];j(()=>{const s=Date.now(),l=Math.floor(s/3e3%r.length);l!==t&&o(l)});const n=r[t];return e.jsxs("group",{position:[0,0,-2],children:[e.jsx(c,{ref:i,position:[0,.8,0],fontSize:.25,color:"#fff600",outlineColor:"#fff600",outlineWidth:.01,anchorX:"center",anchorY:"middle",children:n.title}),e.jsx(c,{position:[0,.4,0],fontSize:.15,color:"#fff600",outlineColor:"#fff600",outlineWidth:.01,anchorX:"center",anchorY:"middle",children:n.subtitle}),e.jsx(c,{position:[0,0,0],fontSize:.12,color:"#fff600",outlineColor:"#fff600",outlineWidth:.01,anchorX:"center",anchorY:"middle",children:n.description}),e.jsxs(c,{position:[0,-.4,0],fontSize:.08,color:"#fff600",outlineColor:"#fff600",outlineWidth:.01,anchorX:"center",anchorY:"middle",children:[t+1," / ",r.length]})]})}function V(){const i=a.useRef(null),t=a.useRef(null),o=a.useRef(null);return j(()=>{const r=Date.now()*.001;i.current&&(i.current.rotation.y=r*.5,i.current.position.y=Math.sin(r)*.2),t.current&&(t.current.rotation.x=r*.3,t.current.position.y=Math.cos(r*1.2)*.15),o.current&&(o.current.rotation.z=r*.7,o.current.position.y=Math.sin(r*.8)*.25)}),e.jsxs("group",{position:[2,0,-2],children:[e.jsx(v,{ref:i,args:[.3,.3,.3],position:[0,.5,0],children:e.jsx("meshBasicMaterial",{color:"#ce422b"})}),e.jsx(D,{ref:t,args:[.15,16,16],position:[0,0,0],children:e.jsx("meshBasicMaterial",{color:"#00d4ff"})}),e.jsx(v,{ref:o,args:[.2,.2,.2],position:[0,-.5,0],children:e.jsx("meshBasicMaterial",{color:"#ff6b35"})}),e.jsx(c,{position:[0,-1,0],fontSize:.08,color:"#fff600",outlineColor:"#fff600",outlineWidth:.01,anchorX:"center",anchorY:"middle",children:"Core Technologies"}),e.jsx(c,{position:[0,-1.2,0],fontSize:.06,color:"#fff600",outlineColor:"#fff600",outlineWidth:.01,anchorX:"center",anchorY:"middle",children:"ðŸ¦€ Rust WebAssembly"}),e.jsx(c,{position:[0,-1.35,0],fontSize:.06,color:"#fff600",outlineColor:"#fff600",outlineWidth:.01,anchorX:"center",anchorY:"middle",children:"ðŸ¥½ WebXR"}),e.jsx(c,{position:[0,-1.5,0],fontSize:.06,color:"#fff600",outlineColor:"#fff600",outlineWidth:.01,anchorX:"center",anchorY:"middle",children:"âš¡ WebGPU"})]})}function Y(){const[i]=a.useState(["ðŸŽµ TechWebMIDI Audio Synthesis","ðŸ¥½ AR/VR MIDI Controllers"]);return e.jsxs("group",{position:[-2,0,-2],children:[e.jsx(c,{position:[0,1,0],fontSize:.12,color:"#fff600",outlineColor:"#fff600",outlineWidth:.01,anchorX:"center",anchorY:"middle",children:"Platform Features"}),i.map((t,o)=>e.jsx(c,{position:[0,.6-o*.2,0],fontSize:.08,color:"#fff600",outlineColor:"#fff600",outlineWidth:.01,anchorX:"center",anchorY:"middle",children:t},o)),e.jsx(c,{position:[0,-.8,0],fontSize:.06,color:"#fff600",outlineColor:"#fff600",outlineWidth:.01,anchorX:"center",anchorY:"middle",children:"Powered by Rust + WebAssembly"})]})}function q(){return e.jsxs(e.Fragment,{children:[e.jsx("ambientLight",{intensity:.5}),e.jsx("pointLight",{position:[10,10,10]}),e.jsx(O,{}),e.jsx(V,{}),e.jsx(Y,{})]})}function H(){return e.jsxs("div",{className:"about-container",style:{width:"100%",height:"100vh",position:"relative"},children:[e.jsxs("div",{className:"about-header",style:{position:"absolute",top:"20px",left:"50%",transform:"translateX(-50%)",zIndex:10,maxWidth:"800px",width:"90%",color:"white",textAlign:"center"},children:[e.jsx("h2",{children:"About"}),e.jsx("p",{children:"Kasm SDK Open Source Community"}),e.jsx("p",{style:{fontSize:"0.9em",marginTop:"10px",color:"#aaa"},children:"Kasm SDK is an open source community project focused on building advanced web based musical instruments including AR and VR instruments and MIDI controllers"})]}),e.jsx(S,{camera:{position:[0,0,5],fov:75},style:{},children:e.jsx(q,{})})]})}const $=({currentApp:i,onAppChange:t,appContext:o="main",onFilterChange:r})=>{const[n,s]=a.useState(!1),d=(()=>{switch(o){case"kasm":return[{id:"kasm_emanator",label:"Kasm Emanator",icon:"ðŸŽ¹",description:"Melodic pattern generator"},{id:"kasm_emanator_trans",label:"Kasm Rust Emanator MIDI Transformation",icon:"ðŸŽ¹",description:"Ableton Live ClipView transformation"},{id:"emanator",label:"Kasm Rust Emanator Ableton MIDI Generative",icon:"ðŸŽ¹",description:"Ableton Live ClipView generative"},{id:"triggaz",label:"Kasm Triggaz",icon:"ðŸŽ¹",description:"Triggers MIDI note/cc pattern detection editor tool"},{id:"bangaz",label:"Kasm Bangaz",icon:"ðŸŽ¹",description:"Ableton Drum Rack drum machine"},{id:"kasm_lfo",label:"Kasm LFO",icon:"ðŸŽ¹",description:"Algorithmic LFO generator"},{id:"arpy",label:"Kasm Arpy",icon:"ðŸŽ¹",description:"Arpeggiator sequencer based on keys held"},{id:"kasm_canvas",label:"Kasm Canvas",icon:"ðŸŽ¹",description:"Visualizers for Kasm devices"},{id:"kasm_jog",label:"Kasm Jog",icon:"ðŸŽ¹",description:"Motion video support for Kasm Canvas"}];case"tech":return[{id:"webmidi",label:"TechWebMIDI",icon:"ðŸŽ¥",description:"Everything TechWebMIDI"},{id:"webgpu",label:"WebGPU",icon:"ðŸŽ®",description:"Using GPU compute shaders with music"}];default:return[{id:"kasm",label:"Kasm SDK",icon:"ðŸŽ¹",description:"Documentation for the Kasm SDK"},{id:"emanator",label:"Emanations Editor",icon:"ðŸŽ¹",description:"Emanator editor tool"},{id:"bangaz",label:"Bangaz Drum Machine",icon:"ðŸŽ¹",description:"Drum machine pattern editor tool"},{id:"arpy",label:"Arpy Arpeggiator Editor",icon:"ðŸŽ¹",description:"Arpeggiator editor tool"},{id:"triggaz",label:"Triggers Editor",icon:"ðŸŽ¹",description:"Triggers MIDI note/cc pattern detection editor tool"}]}})(),m=u=>{if(o!=="main"&&r)r(u);else{t(u);const p=u;let x;switch(p){case"kasm":x=[{id:"kasm_emanator"},{id:"oscillators"},{id:"kasm_lfo"},{id:"effects"},{id:"kasm_canvas"},{id:"kasm_jog"},{id:"kasm_emanator_trans"}];break;case"tech":x=[{id:"webmidi"},{id:"webgpu"}];break;default:x=[]}x.length===0&&s(!1)}},b=()=>{t&&t("bangaz")};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:`hamburger-menu${n?" open":""}`,onClick:()=>s(!n),"aria-label":"Toggle navigation menu","aria-expanded":n,children:[e.jsx("span",{className:"hamburger-line"}),e.jsx("span",{className:"hamburger-line"}),e.jsx("span",{className:"hamburger-line"})]}),n&&e.jsx("div",{className:"sidebar-overlay",onClick:()=>s(!1)}),e.jsxs("nav",{className:`sidebar${n?" open":""}`,children:[e.jsx("div",{className:"sidebar-header",children:e.jsx("h2",{className:"sidebar-title",children:"Kasm SDK"})}),o!=="main"&&e.jsx("div",{className:"sidebar-back-main",children:e.jsx("button",{className:"nav-link",style:{width:"100%",marginBottom:"1em",background:"#ffe4b5",color:"#3D3426",fontWeight:"bold",borderRadius:0},onClick:b,children:"â† Back to Main"})}),e.jsx("div",{className:"sidebar-nav",children:e.jsx("ul",{className:"nav-list",children:d.map(u=>e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link ${i===u.id?"active":""}`,onClick:()=>m(u.id),"aria-current":i===u.id?"page":void 0,children:[e.jsx("span",{className:"nav-icon",children:u.icon}),e.jsxs("div",{className:"nav-content",children:[e.jsx("span",{className:"nav-label",children:u.label}),e.jsx("span",{className:"nav-description",children:u.description})]})]})},u.id))})})]})]})},w=({onDeviceChange:i,onChannelChange:t,initialDeviceId:o="",initialChannel:r=0})=>{const[n,s]=a.useState([]),[l,d]=a.useState(o),[m,b]=a.useState(r),u=()=>{navigator.requestMIDIAccess&&navigator.requestMIDIAccess().then(h=>{const f=[];h.outputs.forEach(g=>{f.push({id:g.id,name:g.name??"Unknown Device"})}),s(f)}).catch(()=>s([]))};a.useEffect(()=>{u()},[]);const p=h=>{d(h.target.value);const f=window;f.kasmWebMIDI&&f.kasmWebMIDI.setCurrentMidiOutput(h.target.value),i&&i(h.target.value)},x=h=>{const f=Number(h.target.value);b(f),t&&t(f)};return e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("label",{children:e.jsxs("select",{style:{padding:"3px",marginLeft:"10px"},value:l,onChange:p,children:[e.jsx("option",{value:"",children:"Select MIDI Device..."}),n.map(h=>e.jsx("option",{value:h.id,children:h.name},h.id))]})}),e.jsx("button",{style:{marginLeft:"10px",padding:"3px 8px"},onClick:u,children:"<"}),e.jsxs("label",{style:{marginLeft:"20px"},children:["MIDI Channel:",e.jsx("select",{style:{padding:"3px",width:"40px",marginLeft:"10px"},value:m,onChange:x,children:[...Array(16)].map((h,f)=>e.jsx("option",{value:f,children:f+1},f))})]})]})},Q=()=>e.jsxs("div",{style:{padding:"2em"},children:["WebMIDI Bangaz Drum Pattern Browser and Editor Tool.",e.jsx("br",{}),e.jsx("div",{style:{margin:"20px 0"},children:e.jsxs("div",{children:["Connect to your MIDI device... (you might need a ",e.jsx("a",{href:"https://help.ableton.com/hc/en-us/articles/209774225-Setting-up-a-virtual-MIDI-bus",target:"_blank",children:"virtual MIDI bus"}),")",e.jsx(w,{})]})}),e.jsx("div",{style:{marginTop:"2rem",width:"100%",display:"flex",justifyContent:"center"},children:e.jsx("iframe",{src:"https://kasmsdk.github.io/latest/bangaz.html",title:"Kasm Demo",width:"90%",height:"1024",style:{border:"2px solid #ccc",borderRadius:"12px",boxShadow:"0 2px 16px rgba(0,0,0,0.12)"},allowFullScreen:!0})})]}),J=()=>e.jsxs("div",{style:{padding:"2em"},children:["WebMIDI Emanator MIDI Pattern Browser and Editor Tool.",e.jsx("br",{}),e.jsx("div",{style:{margin:"20px 0"},children:e.jsxs("div",{children:["Connect to your MIDI device... (you might need a ",e.jsx("a",{href:"https://help.ableton.com/hc/en-us/articles/209774225-Setting-up-a-virtual-MIDI-bus",target:"_blank",children:"virtual MIDI bus"}),")",e.jsx(w,{})]})}),e.jsx("div",{style:{marginTop:"2rem",width:"100%",display:"flex",justifyContent:"center"},children:e.jsx("iframe",{src:"https://kasmsdk.github.io/latest/emanator.html",title:"Kasm Demo",width:"90%",height:"1024",style:{border:"2px solid #ccc",borderRadius:"12px",boxShadow:"0 2px 16px rgba(0,0,0,0.12)"},allowFullScreen:!0})})]}),Z=()=>e.jsxs("div",{style:{padding:"2em"},children:["WebMIDI Arpy arpeggios pattern Browser and Editor Tool.",e.jsx("br",{}),e.jsx("div",{style:{margin:"20px 0"},children:e.jsxs("div",{children:["Connect to your MIDI device... (you might need a ",e.jsx("a",{href:"https://help.ableton.com/hc/en-us/articles/209774225-Setting-up-a-virtual-MIDI-bus",target:"_blank",children:"virtual MIDI bus"}),")",e.jsx(w,{})]})}),e.jsx("div",{style:{marginTop:"2rem",width:"100%",display:"flex",justifyContent:"center"},children:e.jsx("iframe",{src:"https://kasmsdk.github.io/latest/arpy.html",title:"Kasm Demo",width:"90%",height:"1024",style:{border:"2px solid #ccc",borderRadius:"12px",boxShadow:"0 2px 16px rgba(0,0,0,0.12)"},allowFullScreen:!0})})]}),ee=()=>e.jsxs("div",{style:{padding:"2em"},children:["WebMIDI Triggaz midi note/cc pattern detection Editor Tool.",e.jsx("br",{}),e.jsx("div",{style:{margin:"20px 0"},children:e.jsxs("div",{children:["Connect to your MIDI device... (you might need a ",e.jsx("a",{href:"https://help.ableton.com/hc/en-us/articles/209774225-Setting-up-a-virtual-MIDI-bus",target:"_blank",children:"virtual MIDI bus"}),")",e.jsx(w,{})]})})]});function te(){const[i,t]=a.useState("kasm"),o=a.useRef(null);a.useEffect(()=>{const d=new URLSearchParams(window.location.search).get("app");d&&["kasm","tech","about","bangaz","arpy"].includes(d)?t(d):d&&["webmidi","webgpu"].includes(d)&&t("tech")},[]);const r=["kasm","emanator","bangaz","arpy","triggaz"].includes(i),n=()=>i==="kasm"?"kasm":i==="tech"?"tech":"main";a.useEffect(()=>{if(!o.current)return;const l=o.current,d=new _(l);let m;const b=async()=>{await d.initialize()&&(d.resize(window.innerWidth,window.innerHeight),u())},u=()=>{const g=P([0,0,5],[0,0,0],[0,1,0]),z=window.innerWidth/window.innerHeight,C=B(45*(Math.PI/180),z,.1,100);d.render([],g,C),m=requestAnimationFrame(u)};b();const p=()=>{d.resize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",p),()=>{window.removeEventListener("resize",p),cancelAnimationFrame(m),d.dispose()}},[]);const s=l=>{t(l)};return e.jsxs(e.Fragment,{children:[e.jsx("canvas",{ref:o,style:{position:"fixed",top:0,left:0,zIndex:-1,width:"100vw",height:"100vh"}}),e.jsxs("div",{className:"App",children:[e.jsx($,{currentApp:i,onAppChange:s,appContext:n()}),e.jsxs("div",{className:`app-content ${r?"standalone-mode":""}`,children:[i==="bangaz"&&e.jsx(Q,{}),i==="arpy"&&e.jsx(Z,{}),i==="triggaz"&&e.jsx(ee,{}),i==="kasm"&&e.jsx(U,{onNavigate:s}),i==="emanator"&&e.jsx(J,{}),i==="tech"&&e.jsx(K,{}),i==="about"&&e.jsx(H,{})]})]})]})}W.createRoot(document.getElementById("root")).render(e.jsx(a.StrictMode,{children:e.jsx(te,{})}));
